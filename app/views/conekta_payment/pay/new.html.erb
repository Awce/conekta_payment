<div class="pure-g container">
  <div class="pure-u-1">
    <h1><%= t('.shop_title') %></h1>
  </div>

  <%= render 'cart' %>

  <%= form_for @pay, html: { class: 'pure-form' }, url: pay_path  do |form| %>
    <div class="pure-u-1">
      <h2><%= t('.shop_details') %></h2>
      <%= form.hidden_field :cart_id, value: shopping_cart[:cart_id] %>
      <%= form.hidden_field :total, value: shopping_cart[:subtotal] %>
      <%= form.label :email %>
      <%= form.text_field :email, type: 'email',
        placeholder: t('placeholder.email'), maxlength: 40 %>
      <span class="hint"><%= t('hint.email') %></span>
    </div>

    <%= render 'card' %>

    <div class="pure-u-1 action">
      <%= form.submit "Pagar #{number_to_currency(shopping_cart[:subtotal], unit: t('money.unit'))}", class: 'pure-button pure-button-primary', id: 'pay_action' %>
    </div>
  <% end %>
</div>

<% content_for :javascripts  do %>
  <script type="text/javascript">
    $(function() {
        var cardWidget = new CardWidget('#new_pay', {
          validDate: "<%= t('.valid_date') %>",
          monthYear: "<%= t('.month_year') %>"
          }, {
          name: "<%= t('.card_name') %>"
          });
    });
  </script>
<% end %>
